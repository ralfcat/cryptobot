<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Meme Coin Auto Trader</title>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&family=JetBrains+Mono:wght@400;600&display=swap");

      :root {
        --bg-1: #0c0f14;
        --bg-2: #151a24;
        --card: #121826;
        --card-2: #0f1420;
        --accent: #ff6b35;
        --accent-2: #2ec4b6;
        --text: #eef2f7;
        --muted: #8b96a6;
        --warn: #f7b801;
        --bad: #ef476f;
        --good: #06d6a0;
        --shadow: rgba(0, 0, 0, 0.35);
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        font-family: "Space Grotesk", system-ui, sans-serif;
        color: var(--text);
        background: radial-gradient(1200px 700px at 10% 0%, #1e2433 0%, var(--bg-1) 45%)
            fixed,
          radial-gradient(900px 600px at 90% 10%, #222a3a 0%, var(--bg-2) 50%) fixed;
        min-height: 100vh;
        padding: 28px;
      }

      .shell {
        max-width: 1200px;
        margin: 0 auto;
        display: flex;
        flex-direction: column;
        gap: 20px;
      }

      header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 16px;
        padding: 18px 20px;
        border-radius: 16px;
        background: linear-gradient(135deg, rgba(255, 107, 53, 0.12), rgba(46, 196, 182, 0.06));
        border: 1px solid rgba(255, 255, 255, 0.06);
        box-shadow: 0 12px 30px var(--shadow);
      }

      .brand {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }

      .brand h1 {
        margin: 0;
        font-size: 26px;
        letter-spacing: 0.4px;
      }

      .sub {
        color: var(--muted);
        font-size: 14px;
      }

      .status-chip {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        border-radius: 999px;
        font-size: 13px;
        font-weight: 600;
        background: rgba(255, 255, 255, 0.05);
      }

      .pulse {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: var(--good);
        box-shadow: 0 0 0 6px rgba(6, 214, 160, 0.2);
        animation: pulse 1.6s infinite;
      }

      @keyframes pulse {
        0% {
          transform: scale(0.8);
          opacity: 0.8;
        }
        70% {
          transform: scale(1.4);
          opacity: 0;
        }
        100% {
          opacity: 0;
        }
      }

      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        gap: 16px;
      }

      .grid-wide {
        display: grid;
        grid-template-columns: 1fr;
        gap: 16px;
      }

      .card {
        background: linear-gradient(160deg, var(--card), var(--card-2));
        border-radius: 16px;
        padding: 16px;
        border: 1px solid rgba(255, 255, 255, 0.05);
        box-shadow: 0 10px 25px var(--shadow);
        animation: fadeUp 0.6s ease forwards;
      }

      .performance-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        margin-bottom: 12px;
      }

      .performance-header .subtle {
        color: var(--muted);
        font-size: 12px;
      }

      .performance-body {
        display: grid;
        grid-template-columns: minmax(220px, 320px) 1fr;
        gap: 16px;
        align-items: stretch;
      }

      .stat-grid {
        display: grid;
        gap: 10px;
      }

      .stat {
        display: flex;
        flex-direction: column;
        gap: 6px;
        padding: 10px 12px;
        border-radius: 12px;
        background: rgba(255, 255, 255, 0.04);
        border: 1px solid rgba(255, 255, 255, 0.06);
      }

      .stat span {
        color: var(--muted);
        font-size: 12px;
        text-transform: uppercase;
        letter-spacing: 0.8px;
      }

      .stat strong {
        font-family: "JetBrains Mono", ui-monospace, monospace;
        font-size: 18px;
      }

      .chart-card {
        position: relative;
        border-radius: 14px;
        padding: 12px;
        background: radial-gradient(180px 120px at 20% 20%, rgba(255, 107, 53, 0.15), transparent),
          radial-gradient(220px 160px at 80% 10%, rgba(46, 196, 182, 0.18), transparent);
        border: 1px solid rgba(255, 255, 255, 0.06);
        min-height: 220px;
        display: flex;
      }

      #pnl-chart {
        width: 100%;
        height: 100%;
        min-height: 200px;
        display: block;
      }

      @keyframes fadeUp {
        from {
          opacity: 0;
          transform: translateY(12px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .card h3 {
        margin: 0 0 10px;
        font-size: 15px;
        text-transform: uppercase;
        letter-spacing: 1.2px;
        color: var(--muted);
      }

      .metric {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px 0;
        border-bottom: 1px dashed rgba(255, 255, 255, 0.06);
      }

      .metric:last-child {
        border-bottom: none;
      }

      .metric strong {
        font-family: "JetBrains Mono", ui-monospace, monospace;
      }

      .value-good {
        color: var(--good);
      }

      .value-bad {
        color: var(--bad);
      }

      .value-warn {
        color: var(--warn);
      }

      .scroll {
        max-height: 220px;
        overflow: auto;
        padding-right: 6px;
      }

      .log-item,
      .trade-item {
        font-family: "JetBrains Mono", ui-monospace, monospace;
        font-size: 12px;
        padding: 8px 0;
        border-bottom: 1px solid rgba(255, 255, 255, 0.06);
      }

      .badge {
        padding: 4px 8px;
        border-radius: 8px;
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 0.6px;
        background: rgba(255, 255, 255, 0.08);
      }

      .footer {
        color: var(--muted);
        font-size: 12px;
        text-align: center;
      }

      .control-row {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .control-buttons {
        display: grid;
        gap: 10px;
      }

      .mode-toggle {
        display: flex;
        flex-direction: column;
        gap: 8px;
        padding: 12px;
        border-radius: 12px;
        background: rgba(255, 255, 255, 0.04);
        border: 1px solid rgba(255, 255, 255, 0.06);
      }

      .mode-label {
        font-size: 12px;
        color: var(--muted);
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .mode-buttons {
        display: grid;
        grid-template-columns: repeat(2, minmax(140px, 1fr));
        gap: 10px;
      }

      .mode-btn {
        appearance: none;
        border: 1px solid transparent;
        border-radius: 999px;
        padding: 10px 14px;
        font-weight: 600;
        color: var(--text);
        background: rgba(255, 255, 255, 0.06);
        cursor: pointer;
        transition: background 0.2s ease, border-color 0.2s ease, transform 0.2s ease;
      }

      .mode-btn:hover {
        transform: translateY(-1px);
      }

      .mode-btn.active {
        border-color: rgba(255, 255, 255, 0.4);
        background: linear-gradient(135deg, rgba(46, 196, 182, 0.4), rgba(6, 214, 160, 0.35));
        box-shadow: 0 10px 20px rgba(46, 196, 182, 0.2);
      }

      .mode-btn:disabled {
        cursor: not-allowed;
        opacity: 0.5;
        transform: none;
      }

      .mode-status {
        font-size: 12px;
        color: var(--muted);
      }

      .btn {
        appearance: none;
        border: none;
        border-radius: 12px;
        padding: 12px 16px;
        font-weight: 600;
        cursor: pointer;
        color: var(--text);
        background: linear-gradient(135deg, rgba(239, 71, 111, 0.9), rgba(255, 107, 53, 0.9));
        box-shadow: 0 12px 25px rgba(239, 71, 111, 0.2);
        transition: transform 0.15s ease, box-shadow 0.2s ease, opacity 0.2s ease;
      }

      .btn-secondary {
        background: linear-gradient(135deg, rgba(46, 196, 182, 0.9), rgba(6, 214, 160, 0.9));
        box-shadow: 0 12px 25px rgba(46, 196, 182, 0.2);
      }

      .btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 14px 28px rgba(239, 71, 111, 0.28);
      }

      .btn:disabled {
        cursor: not-allowed;
        opacity: 0.5;
        transform: none;
        box-shadow: none;
      }

      .control-status {
        font-size: 12px;
        color: var(--muted);
      }

      @media (max-width: 720px) {
        body {
          padding: 16px;
        }

        header {
          flex-direction: column;
          align-items: flex-start;
        }

        .status-chip {
          width: 100%;
          justify-content: center;
        }

        .scroll {
          max-height: 180px;
        }

        .performance-body {
          grid-template-columns: 1fr;
        }
      }

      @media (max-width: 540px) {
        .metric {
          align-items: flex-start;
          gap: 6px;
          flex-direction: column;
        }

        .metric strong {
          width: 100%;
          word-break: break-all;
        }
      }
    </style>
  </head>
  <body>
    <div class="shell">
      <header>
        <div class="brand">
          <h1>Meme Coin Auto Trader</h1>
          <div class="sub" id="last-action">Booting up...</div>
        </div>
        <div class="status-chip">
          <span class="pulse" id="pulse-dot"></span>
          <span id="status-text">Starting</span>
        </div>
      </header>

      <div class="grid">
        <section class="card">
          <h3>Balances</h3>
          <div class="metric"><span>SOL balance</span><strong id="sol-balance">-</strong></div>
          <div class="metric"><span>SOL price</span><strong id="sol-usd">-</strong></div>
          <div class="metric"><span>Total value</span><strong id="total-usd">-</strong></div>
        </section>

        <section class="card">
          <h3>Position</h3>
          <div class="metric"><span>Mint</span><strong id="pos-mint">-</strong></div>
          <div class="metric"><span>Held</span><strong id="pos-held">-</strong></div>
          <div class="metric"><span>PnL</span><strong id="pos-pnl">-</strong></div>
          <div class="metric"><span>Est value</span><strong id="pos-value">-</strong></div>
        </section>

        <section class="card">
          <h3>Rules</h3>
          <div class="metric"><span>Stop loss</span><strong id="rule-stop">-</strong></div>
          <div class="metric"><span>Take profit</span><strong id="rule-tp">-</strong></div>
          <div class="metric"><span>Soft exit</span><strong id="rule-soft">-</strong></div>
          <div class="metric"><span>Hard exit</span><strong id="rule-hard">-</strong></div>
        </section>

        <section class="card">
          <h3>Tempo</h3>
          <div class="metric"><span>Cooldown</span><strong id="cooldown">-</strong></div>
          <div class="metric"><span>Next entry</span><strong id="next-entry">-</strong></div>
          <div class="metric"><span>Last update</span><strong id="last-update">-</strong></div>
        </section>

        <section class="card">
          <h3>Controls</h3>
          <div class="control-row">
            <div class="mode-toggle">
              <div class="mode-label">Mode</div>
              <div class="mode-buttons">
                <button id="mode-sharp" class="mode-btn" type="button">Sharp-mode</button>
                <button id="mode-simulator" class="mode-btn" type="button">Simulator mode</button>
              </div>
              <div id="mode-status" class="mode-status">Active: -</div>
            </div>
            <div class="control-buttons">
              <button id="sell-now" class="btn" type="button">Sell now</button>
              <button id="reset-cooldown" class="btn btn-secondary" type="button">Reset cooldown</button>
            </div>
            <div id="sell-status" class="control-status">Waiting for position.</div>
            <div id="reset-status" class="control-status">Cooldown ready.</div>
          </div>
        </section>
      </div>

      <div class="grid-wide">
        <section class="card">
          <div class="performance-header">
            <div>
              <h3>Performance</h3>
              <div class="subtle">Rolling snapshot from recent trades.</div>
            </div>
            <div class="badge" id="perf-scope">Rolling</div>
          </div>
          <div class="performance-body">
            <div class="stat-grid">
              <div class="stat"><span>Closed trades</span><strong id="stat-trades">-</strong></div>
              <div class="stat"><span>Win rate</span><strong id="stat-winrate">-</strong></div>
              <div class="stat"><span>Total PnL</span><strong id="stat-totalpnl">-</strong></div>
              <div class="stat"><span>Avg PnL</span><strong id="stat-avgpnl">-</strong></div>
              <div class="stat"><span>Avg hold</span><strong id="stat-avg-hold">-</strong></div>
              <div class="stat"><span>Best / Worst</span><strong id="stat-bestworst">-</strong></div>
            </div>
            <div class="chart-card">
              <canvas id="pnl-chart"></canvas>
            </div>
          </div>
        </section>
      </div>

      <div class="grid">
        <section class="card">
          <h3>Trades</h3>
          <div class="scroll" id="trades"></div>
        </section>

        <section class="card">
          <h3>Logs</h3>
          <div class="scroll" id="logs"></div>
        </section>
      </div>

      <div class="footer">Live WebSocket feed from the bot. Keep this tab open.</div>
    </div>

    <script type="module" src="app.js"></script>
  </body>
</html>
